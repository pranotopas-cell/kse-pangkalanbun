<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Dashboard</title>

<script src="https://cdn.tailwindcss.com"></script>

<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
body{
font-family:'Plus Jakarta Sans',sans-serif;
background:#f1f5f9;
}
</style>
</head>

<body class="p-6">

<div id="harga-grid" class="grid md:grid-cols-4 gap-6"></div>


<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
import { doc,onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";


// ================= FIREBASE CONFIG =================
const firebaseConfig = {
apiKey:"APIKEY",
authDomain:"DOMAIN",
projectId:"PROJECTID",
storageBucket:"BUCKET",
messagingSenderId:"SENDER",
appId:"APPID"
};

const app = initializeApp(firebaseConfig);
const dbFirebase = getFirestore(app);


// ================= INIT HARGA =================
function initHarga(){

const ref = doc(dbFirebase,"hargaBBM","periode");

onSnapshot(ref,(docSnap)=>{

if(docSnap.exists()){

const data = docSnap.data().sekarang || {};
const grid = document.getElementById('harga-grid');
grid.innerHTML="";


// ===== DATA WILAYAH =====
const wilayahNama={
1:{title:"Wilayah 1",detail:"Jawa ,Sumatra ,Bali ,Madura"},
2:{title:"Wilayah 2",detail:"Kalimantan"},
3:{title:"Wilayah 3",detail:"Sulawesi ,NTB"},
4:{title:"Wilayah 4",detail:"Maluku ,NTT ,Papua"}
};


// ===== ANIMASI ANGKA =====
function animateValue(el,start,end,duration=800){
let startTime=null;
function step(t){
if(!startTime)startTime=t;
const progress=Math.min((t-startTime)/duration,1);
const val=Math.floor(progress*(end-start)+start);
el.textContent="Rp "+val.toLocaleString('id-ID');
if(progress<1)requestAnimationFrame(step);
}
requestAnimationFrame(step);
}


// ===== LOOP CARD =====
for(let i=1;i<=4;i++){

const h=parseInt(data['wilayah'+i]||0);
const naik=parseInt(data['kenaikan'+i]||0);

const card=document.createElement("div");
card.className="bg-white p-8 rounded-[2rem] border border-slate-100 text-center shadow-sm";

card.innerHTML=`
<span class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">
${wilayahNama[i].title}
</span>

<div class="text-[11px] text-slate-400 mt-1">
${wilayahNama[i].detail}
</div>

<h3 id="harga${i}" class="text-2xl font-black text-[#064e3b] italic leading-none mt-2">
Rp 0
</h3>

<p id="naik${i}" class="text-xs text-emerald-600 font-semibold mt-2">
Kenaikan periode ini: Rp 0
</p>
`;

grid.appendChild(card);

animateValue(document.getElementById(`harga${i}`),0,h);
animateValue(document.getElementById(`naik${i}`),0,naik);
}

}

});

}


// ===== JALANKAN =====
initHarga();

</script>

</body>
</html>

